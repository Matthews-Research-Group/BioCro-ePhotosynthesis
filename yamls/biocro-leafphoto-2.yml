models:
  - name: server # LeafPhoto model
    language: matlab
    args: ../models/C3-metabolic-and-leaf-model/Leaf_biocro.m
    function: Leaf_biocro
    is_server:
      input: BioCro_params
      output: LeafAssim
    inputs:
        - name: BioCro_params
          default_file:
            name: ../BioCro_params.txt
            filetype: map
        - name: Einput
          outside_loop: true
          default_file:
            name: ../models/C3-metabolic-and-leaf-model/GrCM_output.txt
            transform:
                transformtype: select_fields
                selected: Glyma_ID,Ele:Amb
            filetype: pandas
        - name: Eio
          outside_loop: true
          default_file:
            name: ../models/C3-metabolic-and-leaf-model/Einput7.txt
            filetype: pandas
            no_header: true
    outputs:
      - name: LeafAssim
        default_file:
          name: ./LeafBiocroOut.txt
          filetype: table

  - name: client #BioCro
    language: R
    args: ../Gro_wrapper.R
    function: Gro_wrapper
    client_of: server
    inputs:
        - name: initial_state
          recv_converter: pandas
          outside_loop: true
          default_file:
            name: ../soybean_initial_state_ephoto.txt
            filetype: pandas
        - name: parameters
          recv_converter: pandas
          outside_loop: true
          default_file:
            name: ../soybean_parameters_ephoto.txt
            filetype: pandas
        - name: varying_parameters
          recv_converter: pandas
          outside_loop: true
          default_file:
            name: ../soybean_weather_2002doy202hrs0800_1500.txt
            filetype: pandas
        - name: steady_state_module_names
          recv_converter: table
          outside_loop: true
          default_file:
            name: ../soybean_ss_modules_ephoto.txt
            filetype: pandas
            no_header: true
        - name: derivative_module_names
          recv_converter: table
          outside_loop: true
          default_file:
            name: ../soybean_deriv_modules.txt
            filetype: pandas
            no_header: true
    outputs:
        - name: result
          send_converter: pandas
          default_file:
            name: result.txt
            filetype: pandas
